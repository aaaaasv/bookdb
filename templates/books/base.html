<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{% block title %}{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/598e0465f9.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    <link rel="stylesheet" href="{% static 'books/stylesheets/style.css' %}"/>

</head>
<body>
<style>
    .placeholder {
        position: relative;
    }

    .placeholder::after {
        position: absolute;
        left: 13px;
        top: 0;
        bottom: 0;
    {#margin-top:auto;#}{#margin-bottom:auto;#} margin-bottom: -1px;
        justify-content: center;
        display: flex;
        align-items: center;
        content: attr(data-placeholder);
        pointer-events: none;
        opacity: 0.6;
    }

    body {
        font-family: Open Sans, sans-serif;
        font-style: normal;
    }
</style>
{% block navbar %}
    {#    <nav class="navbar fixed-top navbar-expand-lg navbar-{% block navbar-color %}dark{% endblock navbar-color %}">#}
    {#        <a href="{% url 'start-page' %}" class="navbar-brand">IBDB</a>#}
    {#        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler"#}
    {#                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">#}
    {#            <span class="navbar-toggler-icon"></span>#}
    {#        </button>#}
    {##}
    {#        <div class="collapse navbar-collapse" id="navbarToggler">#}
    {#            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">#}
    {#                <li class="nav-item active">#}
    {#                    <a href="{% url 'start-page' %}" class="nav-link">Home <span class="sr-only">(current)</span></a>#}
    {#                </li>#}
    {#                <li class="nav-item">#}
    {#                    <a href="{% url 'topbook-list' %}" class="nav-link">#}
    {#                        Top#}
    {#                    </a>#}
    {#                </li>#}
    {#                {% if user.is_authenticated %}#}
    {#                    <li class="nav-item">#}
    {#                        <a href="#" class="nav-link">|</a>#}
    {#                    </li>#}
    {#                    <li class="nav-item ">#}
    {#                        <a href="#" class="nav-link">#}
    {#                            {{ user.username }}#}
    {#                        </a>#}
    {#                    </li>#}
    {##}
    {#                    <li class="nav-item">#}
    {#                        <a href="{% url 'logout' %}" class="nav-link">Log out</a>#}
    {#                    </li>#}
    {#                {% else %}#}
    {#                    <li class="nav-item">#}
    {#                        <a href="{% url 'login' %}" class="nav-link">Log in</a>#}
    {#                    </li>#}
    {##}
    {#                {% endif %}#}
    {##}
    {#            </ul>#}
    {##}
    {#            <form class="form-inline my-2 my-lg-0" method="get" action="{% url 'topbook-list' %}">#}
    {#<div class="placeholder" data-placeholder="Search" id="searchbar-placeholder">#}
    {#                    <input name="search-text" type="search"  class="form-control mr-sm-2"#}
    {#                           id="searchbar">#}
    {#</div>#}
    {#                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>#}
    {#            </form>#}
    {#        </div>#}
    {#    </nav>#}
{% endblock %}
{% block content %}

{% endblock %}

{#<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"#}
{#        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"#}
{#        crossorigin="anonymous"></script>#}
<script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script>
    AOS.init();
</script>
<script>
    $('#searchbar').on('keyup', function () {
        $.ajax({
            url: {% url 'books:book-suggest' %},
            type: 'GET',
            data: {
                search_text: $('#searchbar').val()
            },
            dataType: 'json',
            success: function (res) {
                if ('completed' in res) {
                    $('#search-suggestion').text(res.completed);
                    $('#search-suggestion').show()
                    console.log(res.completed)
                } else {
                    $('#search-suggestion').hide()
                    $('#search-suggestion').attr('');
                    console.log('no completed in res')
                }
            },
            error: function (e) {
                console.log("error")
                $('#searchbar-placeholder').hide()
                $('#searchbar-placeholder').attr('');
            }
        });
    })
    $('#search-suggestion').on('click', function () {
        $('#searchbar').val($(this).text())
        $(this).hide()
    })
</script>
</body>
</html>